!function(t){var e={};function o(d){if(e[d])return e[d].exports;var a=e[d]={i:d,l:!1,exports:{}};return t[d].call(a.exports,a,a.exports,o),a.l=!0,a.exports}o.m=t,o.c=e,o.d=function(t,e,d){o.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:d})},o.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},o.t=function(t,e){if(1&e&&(t=o(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var d=Object.create(null);if(o.r(d),Object.defineProperty(d,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var a in t)o.d(d,a,function(e){return t[e]}.bind(null,a));return d},o.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return o.d(e,"a",e),e},o.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},o.p="/",o(o.s=0)}({0:function(t,e,o){o("bUC5"),o("xVMN"),o("qYv7"),o("uHBs"),o("0GNU"),o("S9YL"),t.exports=o("Ge+w")},"0GNU":function(t,e){},"Ge+w":function(t,e){},S9YL:function(t,e){},bUC5:function(t,e,o){o("mBiY"),o("vnkv")},mBiY:function(t,e){!function(t){"use strict";var e;try{d()}catch(t){}function o(){t(".comment-section").each((function(){var e=t(this).find("#note-messages")[0].scrollHeight;t(this).find("#note-messages").animate({scrollTop:e})}))}function d(t){var e=t.parents(".comment-section").find("#note-messages"),o=t.parents(".comment-section").find("#note-messages")[0].scrollHeight;e.animate({scrollTop:o})}function a(o){o.preventDefault(),e="#"+t(this).data("scope")+" ";var a=t(this),s=t(e+"#note-comment-form").data("url"),i=t(e+"#note_model_id").val(),c=t(e+"#note_model_type").val(),l=t(e+"#note_category").val(),r=t(e+"#note_message").val();t(e+"textarea.note").prop("disabled",!0),t.ajax({url:s,type:"POST",data:{model_id:i,model_type:c,category:l,message:r},success:function(o){t(e+".first-comment").remove(),t(e+"#note-messages").append(o),t(e+"textarea.note").html(""),t(e+"textarea.note").val(""),t(e+"textarea.note").prop("disabled",!1),t(e+"#no-comment").hide();var s=t(e+".comment-counts").text();t(e+".comment-counts").text(parseInt(s)+1),n(),d(a)},error:function(o,d,a){console.log(o,d,a),alert(a),t(e+"textarea.note").prop("disabled",!1)}})}function n(){var t=document.getElementById("note-messages");t.scrollTop=t.scrollHeight}t(document).on("click","#note_trigger",(function(o){e="#"+t(this).data("scope")+" ",console.log(e),n(),t(e+"#note_trigger").addClass("active"),t(e+"#note_window").addClass("active")})),t(document).on("click","#close-comments",(function(){e="#"+t(this).data("scope")+" ",t(e+"#note_trigger").removeClass("active"),t(e+"#note_window").removeClass("active")})),t(document).on("click","#note-comment-form .btn",a),t(document).on("click","#demande-comment-form .btn",a),o(),t(".see-all-comments").click((function(){if(t(this).hasClass("active-show-all")){t(this).data("demande-id");t(this).find(".show-comment-text").text("Voir tous les commentaires"),t(this).removeClass("active-show-all"),t(this).parents(".comment-section").find(".demande_old_messages_shadow").show(),t(this).parents(".comment-section").find("#note-messages").css({height:"300px","overflow-y":"scroll"}),o()}else{t(this).data("demande-id");t(this).find(".show-comment-text").text("Afficher les derniers commentaires"),t(this).addClass("active-show-all"),t(this).parents(".comment-section").find(".demande_old_messages_shadow").hide(),t(this).parents(".comment-section").find("#note-messages").css({height:"auto","overflow-y":"inherit"}),o()}})),t.ajaxSetup({headers:{"X-CSRF-Token":t('meta[name="csrf-token"]').attr("content")}})}(window.jQuery)},qYv7:function(t,e){},uHBs:function(t,e){},vnkv:function(t,e){!function(t){"use strict";function e(e,o){var d=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;t.ajax({type:"GET",url:route+"todo/list/"+e+"/"+o,success:function(e){t(".f-loader").fadeOut(300),t("body").append(e),t("#todo-list-modal").modal({show:!0,backdrop:"static",keyboard:!1}),t(".sortable-todo-list").sortable({handle:".sort-handle",stop:function(e,o){var d={};t(".todo-list-section .option-box-grid").each((function(e,o){d[t(this).find("input").data("todo-id")]=e+1})),t.ajax({type:"POST",url:route+"todo/update/orders",data:{todos:d},success:function(t){}})}}),d(e)},error:function(t){}})}window.click_demande_child=null,t("body").on("click",".todo-strip .add-todo",(function(){var o=t(this).data("project-id"),d=t(this).data("demande-id");t(".f-loader").fadeIn(300),window.click_demande_child=t(this),e(o,d)})),t("body").on("click",".create-template",(function(){var e=t(this).data("project-id"),o=t(this).data("demande-id");t.ajax({type:"GET",url:route+"todo/template/create",data:{project_id:e,demande_id:o},success:function(e){t("body").append(e),t("#todo-list-modal").modal("hide"),t("#create-todo-template-modal").modal({show:!0,backdrop:"static",keyboard:!1})}})})),t("body").on("click",".save-template",(function(){var e=t(this).data("project-id"),o=t(this).data("demande-id"),d=t(".template-name").val();t(this).text("Économie...").prop("disabled",!0),t(".template-name").prop("disabled",!0),t.ajax({type:"POST",url:route+"todo/template/save",data:{project_id:e,demande_id:o,template_name:d},success:function(e){t("#create-todo-template-modal").modal("hide")}})})),t("body").on("keyup",".todo-text",(function(e){""!=t(this).val().trim()?t(".save-todo-message").show():t(".save-todo-message").hide(),13==e.keyCode&&t(".save-todo-message").trigger("click")})),t("body").on("click",".add-todo-list",(function(){t(".save-todo-message").trigger("click")})),t("body").on("click",".save-todo-message",(function(){t(this);var e=t(".todo-text").val();if(""!=e.trim()){t(".todo-text").prop("disabled",!0);var o=t(this).data("project-id"),d=t(this).data("demande-id");t.ajax({type:"POST",url:route+"todo/save",data:{projet_id:o,demande_id:d,todo:e},success:function(e){t(".todo-text").val("").prop("disabled",!1),t(".todo-list-section").append(e.html),t(".total-todos").text(t(".single-todo-div").length);var o=window.click_demande_child.parents(".todo-strip");o.removeClass("in-active"),o.find(".fa").removeClass("fa-plus").addClass("fa-check"),o.find("label").html('<span class="demande-completed-todos">0</span> complété sur <span class="demande-total-todos">0</span>'),o.find(".demande-total-todos").text(t(".single-todo-div").length),o.find(".demande-completed-todos").text(t(".todo-list-section").find(".task-completed").length),t(".todo-text").focus()}})}})),t("body").on("click",".todo-checkbox",(function(){var e=t(this).data("todo-id"),o=0,d=parseInt(t(".total-todos").text());if(t(this).is(":checked")){t(this).parent(".option-box-grid").find("p").addClass("task-completed");var a=parseInt(t(".number-of-completed-todos").text());a+=1,t(".number-of-completed-todos").text(a),t(".todo-progress").css("width",100*a/d+"%"),window.click_demande_child.parents(".todo-strip").find(".demande-completed-todos").text(a),o=1,d==a&&window.click_demande_child.parents(".todo-strip").find(".add-todo").removeClass("bg-white").addClass("bg-aqua")}else{t(this).parent(".option-box-grid").find("p").removeClass("task-completed");var n=parseInt(t(".number-of-completed-todos").text());n-=1,t(".number-of-completed-todos").text(n),t(".todo-progress").css("width",100*n/d+"%"),window.click_demande_child.parents(".todo-strip").find(".demande-completed-todos").text(n),o=0,window.click_demande_child.parents(".todo-strip").find(".add-todo").removeClass("bg-aqua").addClass("bg-white")}t.ajax({type:"GET",url:route+"todo/update/status",data:{status:o,todo_id:e},success:function(t){console.log(t)}})})),t("body").on("click",".todo-strip .create-todo",(function(){var e=t(this).data("project-id"),o=t(this).data("demande-id");window.click_demande_child=t(this),t(".f-loader").fadeIn(300),t.ajax({type:"GET",url:route+"todo/templates/list",data:{projet_id:e,demande_id:o},success:function(e){t(".f-loader").fadeOut(300),t("body").append(e),t("#todo-template-modal").modal({show:!0,backdrop:"static",keyboard:!1})},error:function(t){}})})),t("body").on("click",".create-todo-list",(function(){var o=t(this).data("projet-id"),d=t(this).data("demande-id"),a=t(".selected-template").val();t(this).text("S'il vous plaît, attendez.."),"0"==a?(t(this).text("AJOUTER"),t("#todo-template-modal").modal("hide"),e(o,d)):t.ajax({type:"POST",url:route+"todo/from/template",data:{projet_id:o,demande_id:d,template_id:a},success:function(a){t(this).text("AJOUTER"),t.notify({message:a.message},{type:"success"}),t("#todo-template-modal").modal("hide"),e(o,d,(function(e){var o=window.click_demande_child.parents(".todo-strip");o.removeClass("in-active"),o.find(".fa").removeClass("fa-plus").addClass("fa-check"),o.find("label").html('<span class="demande-completed-todos">0</span> complété sur <span class="demande-total-todos">0</span>'),o.find(".demande-total-todos").text(t(".single-todo-div").length)}))}})})),t("body").on("dblclick",".option-box-grid p",(function(){t(this).attr("contenteditable",!0).focus()})),t("body").on("keypress",".option-box-grid p",(function(e){if(13==e.keyCode){var o=t(this),d=t(this).text().trim(),a=t(this).data("todo-id");t(this).attr("contenteditable",!1),t.ajax({type:"POST",url:route+"todo/update/"+a,data:{todo:d},success:function(e){1==e.status&&(t.notify({message:e.message},{type:"success"}),""==d&&(o.parents(".single-todo-div").remove(),window.click_demande_child.parents(".todo-strip").find(".demande-total-todos").text(t(".single-todo-div").length),t(".total-todos").text(t(".single-todo-div").length))),o.attr("contenteditable",!1)}})}})),t("body").on("hidden.bs.modal","#create-todo-template-modal",(function(){t("#create-todo-template-modal").remove()})),t("body").on("hidden.bs.modal","#todo-list-modal",(function(){t("#todo-list-modal").remove()}))}(window.jQuery)},xVMN:function(t,e){}});